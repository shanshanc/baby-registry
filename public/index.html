<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L6HR5QCC1M"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-L6HR5QCC1M');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <title>Baby Registry</title>
    <link rel="icon" href="img/heart.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap">
    <!-- Preload critical assets -->
    <link rel="preload" href="js/constants.js" as="script" crossorigin="anonymous">
    <link rel="preload" href="js/imageOptimizer.js" as="script" crossorigin="anonymous">
    <link rel="preload" href="js/scripts.js" as="script" crossorigin="anonymous">
    <link rel="preload" href="js/types.js" as="script" crossorigin="anonymous">
    <link rel="preload" href="styles.css" as="style">
    <!-- Debug utilities - loaded based on environment -->
    <script>
        // Only load debug tools in development or when explicitly requested
        if (
            window.location.hostname === 'localhost' || 
            window.location.hostname === '127.0.0.1' || 
            window.location.hostname.includes('.local') ||
            window.location.hostname.includes('staging') ||
            window.location.protocol === 'file:' ||
            window.location.search.includes('debug=true')
        ) {
            const debugScript = document.createElement('script');
            debugScript.src = 'js/debug.js';
            document.head.appendChild(debugScript);
        }
    </script>
    <!-- Defer non-critical scripts -->
    <script src="js/constants.js" type="module"></script>
    <script src="js/stateManager.js" type="module"></script>
    <script src="js/imageOptimizer.js" type="module"></script>
    <script src="js/sidebar.js" type="module"></script>
    <script src="js/scripts.js" type="module" defer></script>
    <script src="js/types.js" type="module" defer></script>
    <!-- Register service worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</head>
<body>
    <!-- Sticky Header -->
    <div id="sticky-header" class="sticky-header">
        <!-- Desktop Version -->
        <div class="sticky-header-desktop">
            <div class="sticky-header-content">
                <h2 class="sticky-title">Baby Registry</h2>
                <nav class="sticky-nav">
                    <button class="sticky-nav-item" data-target="bank-account" data-tooltip="é»æ“ŠæŸ¥çœ‹åŒ¯æ¬¾è³‡è¨Š">
                        <i class="fas fa-university"></i>
                        <span>åŒ¯æ¬¾è³‡è¨Š</span>
                    </button>
                    <button class="sticky-nav-item" data-target="shipping-address" data-tooltip="é»æ“ŠæŸ¥çœ‹å¯„é€è³‡è¨Š">
                        <i class="fas fa-shipping-fast"></i>
                        <span>å¯„é€è³‡è¨Š</span>
                    </button>
                </nav>
            </div>
        </div>
        
        <!-- Mobile Version -->
        <div class="sticky-header-mobile">
            <div class="sticky-header-mobile-content">
                <button class="sidebar-toggle-btn" id="sidebar-toggle-mobile">
                    <i class="fas fa-filter"></i>
                    <span>ç¯©é¸</span>
                </button>
                <h2 class="sticky-title-mobile">Baby Registry</h2>
                <nav class="sticky-nav-mobile">
                    <button class="sticky-nav-item-mobile" data-target="bank-account">
                        <i class="fas fa-university"></i>
                    </button>
                    <button class="sticky-nav-item-mobile" data-target="shipping-address">
                        <i class="fas fa-shipping-fast"></i>
                    </button>
                </nav>
            </div>
        </div>
    </div>

    <!-- Sidebar Overlay for Mobile -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <div class="container">
      <h1 class="title">Baby Registry</h1>
      <p class="greeting">è¬è¬è¦ªæœ‹å¥½å‹ä¸€èµ·åˆ†äº«æˆ‘å€‘çš„é«˜å…‰æ™‚åˆ»ï¼ŒBaby Registryæ¸…å–®å¦‚ä¸‹ï¼Œå¡«ä¸Šåå­—å³å¯èªé ˜ï¼Œä¹Ÿå¯ä»¥ã€Œåœ˜è³¼ã€å…±äº«ğŸ˜†ï¼Œå¦‚è¦ºå¾—æ²’æœ‰é©åˆæˆ–æ“ä½œè¦ºå¾—å¤ªè¤‡é›œï¼Œä¹Ÿæ­¡è¿ç›´æ¥åŒ¯æ¬¾åˆ°ä»¥ä¸‹è‚²å…’åŸºé‡‘å¸³è™Ÿï¼Œå°å¯¶å¯¶æœƒå¥½å¥½å­é †å¤§å®¶çš„ğŸ˜‚ä½†åƒè¬ä¸ç”¨æœ‰å£“åŠ›ï¼Œé–‹å¿ƒæœ€é‡è¦å”·ï¼Œå†æ¬¡æ„Ÿè¬å¤§å®¶ä¸€åŒä¾†åˆ†äº«ç”Ÿå‘½ä¸­ç¾å¥½æ™‚åˆ»ï¼</p>
      <h3 class="bank-account"><span class="bank-account-label"></span><span id="bank-account">è¼‰å…¥ä¸­...</span></h3>
      <h3 class="address"><span class="address-label">å¯„é€åœ°å€: </span><span id="shipping-address">è¼‰å…¥ä¸­...</span> <i class="fa-solid fa-baby-carriage"></i></h3>
      <h3 class="recipient"><span class="recipient-label">æ”¶ä»¶äºº: </span><span id="recipient">è¼‰å…¥ä¸­...</span></h3>
      <div class="registry-wrapper">
        <div class="sidebar" id="sidebar">
          <div class="sidebar-header">
            <h3 class="sidebar-title">ç¯©é¸èˆ‡åˆ†é¡</h3>
            <button class="sidebar-close-btn" id="sidebar-close">
              <i class="fas fa-times"></i>
            </button>
          </div>
          
          <div class="sidebar-content">
            <div class="controls">
                <div class="control-checkboxes">
                    <label>
                        <input type="checkbox" id="expand-all"> å±•é–‹å…¨éƒ¨
                    </label>
                    <label>
                        <input type="checkbox" id="collapse-all"> æ”¶èµ·å…¨éƒ¨
                    </label>
                </div>
            </div>
            
            <div class="filter-search-controls">
                <div class="filter-controls">
                    <div class="filter-controls-label">ç¯©é¸èªé ˜ç‹€æ…‹</div>
                    <div class="filter-controls-radio">
                        <label>
                            <input type="radio" name="status-filter" value="all" checked> å…¨éƒ¨
                        </label>
                        <label>
                            <input type="radio" name="status-filter" value="available"> å¯èªé ˜
                        </label>
                        <label>
                            <input type="radio" name="status-filter" value="taken"> å·²èªé ˜
                        </label>
                    </div>
                </div>
                <div class="search-control">
                    <div class="search-input-container">
                        <input type="text" id="search-input" placeholder="æœå°‹ç”¢å“...">
                        <button type="button" id="search-clear-btn" class="search-clear-btn" aria-label="Clear search">Ã—</button>
                    </div>
                </div>
            </div>
            
            <div class="categories" id="category-container"></div>
          </div>
        </div>
        <div class="content" id="items-container" data-loading="true">
          <div class="loading-skeleton">
            <div class="skeleton-category">
              <div class="skeleton-subcategory"></div>
              <div class="skeleton-items">
                <div class="skeleton-item"></div>
                <div class="skeleton-item"></div>
                <div class="skeleton-item"></div>
              </div>
            </div>
            <div class="skeleton-category">
              <div class="skeleton-subcategory"></div>
              <div class="skeleton-items">
                <div class="skeleton-item"></div>
                <div class="skeleton-item"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <footer class="footer">
          <p>&copy; 2025 Daphne &amp; Hsin</p>
          <p><a href="mailto:service@daphne-hsin-baby-registry.me">service@daphne-hsin-baby-registry.me</a></p>
      </footer>
    </div>

    <!-- Modal -->
    <div id="claim-success-modal" class="modal">
        <div class="modal-content">
            <h2>æ„Ÿè¬æ‚¨çš„èªé ˜</h2>
            <p>è‹¥æœ‰ä»»ä½•å•é¡Œæˆ–éœ€è¦ä¿®æ”¹ï¼Œæ­¡è¿èˆ‡æˆ‘å€‘è¯çµ¡</p>
            <p class="modal-email">service@daphne-hsin-baby-registry.me</p>
            <button id="close-modal" class="close-modal-btn">é—œé–‰</button>
        </div>
    </div>
</body>
</html>
